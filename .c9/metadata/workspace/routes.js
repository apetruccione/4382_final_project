{"changed":true,"filter":false,"title":"routes.js","tooltip":"/routes.js","value":"var crypto = require('crypto');\nvar express = require('express');\nmodule.exports = function(app) {\n  var users = require('./controllers/users_controller');\n  app.use('/static', express.static( './static')).\n      use('/lib', express.static( '../lib')\n  );\n  app.get('/', function(req, res){\n    if (req.session.user) {\n      res.render('index', {username: req.session.username,\n                           msg:req.session.msg});\n    } else {\n      req.session.msg = 'Access denied!';\n      res.redirect('/login');\n    }\n  });\n  app.get('/user', function(req, res){\n    if (req.session.user) {\n      res.render('user', {msg:req.session.msg});\n    } else {\n      req.session.msg = 'Access denied!';\n      res.redirect('/login');\n    }\n  });\n  app.get('/signup', function(req, res){\n    if(req.session.user){\n      res.redirect('/');\n    }\n    res.render('signup', {msg:req.session.msg});\n  });\n  app.get('/login',  function(req, res){\n    if(req.session.user){\n      res.redirect('/');\n    }\n    res.render('login', {msg:req.session.msg});\n  });\n  app.get('/logout', function(req, res){\n    req.session.destroy(function(){\n      res.redirect('/login');\n    });\n  });\n  app.post('/signup', users.signup);\n  app.post('/user/update', users.updateUser);\n  app.post('/user/delete', users.deleteUser);\n  app.post('/login', users.login);\n  app.get('/user/profile', users.getUserProfile);\n}\n","undoManager":{"mark":0,"position":1,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":46,"column":1},"end":{"row":47,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":47,"column":0},"end":{"row":47,"column":17}},"text":"//testing commit "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":47,"column":0},"end":{"row":47,"column":17}},"text":"//testing commit "}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":11,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1416427563009}